<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>To My Love ðŸ’›</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@600&display=swap');

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: 'Quicksand', sans-serif;
      background: radial-gradient(circle at top, #1a1a40 0%, #0b0c2a 100%);
      overflow: hidden;
      color: #f0f0f0;
    }

    canvas {
      position: fixed;
      top: 0;
      left: 0;
      z-index: 0;
    }

    .letter-container {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      max-width: 800px;
      width: 90%;
      padding: 2em 3em;
      text-align: center;
      z-index: 2;
      white-space: pre-wrap;
    }

    .letter-line {
      font-size: 2.6em;
      line-height: 3em;
      text-shadow: 0 0 8px rgba(255, 255, 255, 0.1);
      opacity: 1;
      transition: opacity 0.8s ease;
      display: inline-block;
      hyphens: auto;
      word-break: break-word;
    }

    .letter-char {
      display: inline-block;
      opacity: 0;
      transition: all 0.5s ease;
    }

    .letter-char.visible {
      opacity: 1;
    }

    .glitch {
      animation: glitch 0.4s steps(1, end) forwards;
    }

    @keyframes glitch {
      0%   { transform: scale(1); opacity: 0.4; }
      25%  { transform: translateX(-0.5px) rotate(0.5deg); }
      50%  { transform: translateX(0.5px) rotate(-0.5deg); }
      75%  { transform: translateY(-0.5px) scale(1.01); }
      100% { opacity: 1; transform: scale(1); }
    }

    @media screen and (max-width: 768px) {
      .letter-line {
        font-size: 1.8em;
        line-height: 2.2em;
      }
    }
  </style>
</head>
<body>
  <canvas id="fireflies"></canvas>
  <p style="text-align: center; font-size: 1em; color: #4444c8c2;">CLICK/TAP ANYWHERE FOR NEXT LINE</p>
  <div class="letter-container" id="letter"></div>

  <script>
    const canvas = document.getElementById('fireflies');
    const ctx = canvas.getContext('2d');
    let w = canvas.width = window.innerWidth;
    let h = canvas.height = window.innerHeight;

    const fireflies = Array.from({ length: 100 }, () => createFirefly());

    function createFirefly() {
      return {
        x: Math.random() * w,
        y: Math.random() * h,
        r: Math.random() * 2 + 1,
        vx: (Math.random() - 0.5) * 0.3,
        vy: (Math.random() - 0.5) * 0.3,
        glow: Math.random() * Math.PI * 2,
        drift: Math.random() * 1.5
      };
    }

    function animateFireflies() {
      ctx.clearRect(0, 0, w, h);
      fireflies.forEach(f => {
        f.x += f.vx + Math.sin(f.glow) * 0.15;
        f.y += f.vy + Math.cos(f.glow) * 0.15;
        f.glow += 0.02;
        if (f.x < 0 || f.x > w || f.y < 0 || f.y > h) Object.assign(f, createFirefly());
        let alpha = 0.15 + Math.sin(f.glow * 2) * 0.25;
        ctx.beginPath();
        ctx.arc(f.x, f.y, f.r, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(255,255,180,${alpha})`;
        ctx.shadowColor = `rgba(255,255,200,${alpha})`;
        ctx.shadowBlur = 15;
        ctx.fill();
      });
      requestAnimationFrame(animateFireflies);
    }
    animateFireflies();

    const lines = [
      "Hey my forever love,",
      "You're the sunrise my soul stretches for every morning.",
      "You're the starlight I whisper dreams to every night.",
      "Your voice is my favorite melody,",
      "and your laugh, the sweetest song the universe composed just for me.",
      "Your smile could calm storms in my heart,",
      "and your eyesâ€¦ they hold galaxies that I want to get lost in forever.",
      "You're not just beautiful. You're my most beautiful reason to exist.",
      "Even the fireflies pause to admire your light when you enter the room.",
      "You're my safe place, my warmth, my everything.",
      "Just one hug from you makes my entire world right again.",
      "When I say I love you, I mean it with every breath,",
      "with every heartbeat that rushes at the thought of you.",
      "Youâ€™re the only person who can make my soul blush.",
      "And Iâ€™ll spend forever making you feel the way you make me feel: cherished, adored, treasured.",
      "For every firefly that glows tonight,",
      "know that my love for you glows a thousand times brighter.",
      "Yours eternally,",
      "Joy ðŸ’›"
    ];

    const container = document.getElementById('letter');
    let index = 0;
    let prev = "";

    async function glitchToLine(oldLine, newLine) {
      return new Promise(resolve => {
        const div = document.createElement('div');
        div.className = 'letter-line';
        container.innerHTML = '';
        container.appendChild(div);

        const maxLength = Math.max(oldLine.length, newLine.length);

        for (let i = 0; i < maxLength; i++) {
          const span = document.createElement('span');
          span.className = 'letter-char';
          const char = newLine[i] === ' ' ? '\u00A0' : (newLine[i] || '');
          span.textContent = char;
          div.appendChild(span);
        }

        let spans = div.querySelectorAll('span');
        let interval = setInterval(() => {
          let allDone = true;
          spans.forEach((span, i) => {
            if (!span.classList.contains('visible')) {
              allDone = false;
              span.textContent = String.fromCharCode(33 + Math.random() * 94);
              span.classList.add('glitch');
            }
          });
        }, 50);

        setTimeout(() => {
          clearInterval(interval);
          spans.forEach((span, i) => {
            span.textContent = newLine[i] === ' ' ? '\u00A0' : (newLine[i] || '');
            span.classList.remove('glitch');
            span.classList.add('visible');
          });
          resolve();
        }, 1800);
      });
    }

    async function startLetter() {
      if (index >= lines.length) index = 0;
      await glitchToLine(prev, lines[index]);
      prev = lines[index];
      index++;
    }

    startLetter();

    document.body.addEventListener('click', startLetter);
  </script>
</body>
</html>
